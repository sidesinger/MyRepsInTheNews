<!DOCTYPE html>
<html lang=en>
<head>
	<meta charset=utf-8>
	<title>Your Elected Representatives In The News</title> 
	<link href="http://fonts.googleapis.com/css?family=Josefin+Sans:400,400italic|Montserrat:400,700" rel="stylesheet" type="text/css">
	<link href="styles/main.css" media="all" rel="stylesheet" type="text/css" />
	<script src="https://www.google.com/jsapi"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
	<script src="scripts/knockout.mapping.2.4.1.js"></script>
	<script src="scripts/repsinthenews-api.js"></script>
	<script src="scripts/repsinthenews-viewmodel.js"></script>
	<script src="scripts/repsinthenews-processing.js"></script>
</head>
<body>
	<header>
		<h1>Your Elected Representatives In The News</h1>
		<h2>See the latest news on your elected representatives</h2>
	</header>
	<section id="adressForm">
		<label for="address">Enter your address</label>
		<input type="text" maxlength="200" name="address" id="address" data-bind="value: address" />
		<button id="addressButton" data-bind="click: getRepsByAddress,visible: isSearching() === false">Go!</button>
		<span id="searching" data-bind="visible: isSearching">Searching...</span>
	</section>
	<section id="results">
		<h3 data-bind="text: getRepsMessage"></h3>
		<ul id="repsList" data-bind="foreach: reps">
			<li>
				<!-- ko if: photoUrl -->
				<img data-bind="attr: { src: photoUrl, alt: name }" />
				<!-- /ko -->
				<a data-bind="text: name, click: $parent.selectRep" href="#"></a>
				<div class="office" data-bind="text: office"></div>
			</li>
		</ul>
	    
	</section>
	<section id="selectedRep" data-bind="if: hasSelectedRep">
		<!-- ko with: selectedRep -->
			<!-- ko if: photoUrl -->
				<img data-bind="attr: { src: photoUrl, alt: name }" />
			<!-- /ko -->
			<div class="name" data-bind="text: name"></div>
			<div class="office" data-bind="text: office"></div>
			<div class="division" data-bind="text: division"></div>
			<nav>
				<ul>
					<!-- ko foreach: urls -->
						<li><a data-bind="text: 'Rep Homepage', attr: { href: $data }, class: 'general'"></a></li>
					<!-- /ko -->
					<!-- ko foreach: channels -->
						<li data-bind="template: { name: type()+'RepLinkTemplate', data: id }"></li>
					<!-- /ko -->
				</ul>
			</nav>
			<section id="news">
				<h3 data-bind="text: getNewsMessage"></h3>
				<div class="waitPanel" data-bind="visible: isGettingNews">Getting the news for this rep...</div>
				<pre class="content" data-bind="text: ko.toJSON(news, null, 2)"></pre>
			</section>
		<!-- /ko -->
	</section>
	<footer> 
		Written by <a href="http://www.sidesinger.com" target="_blank">Andrew Sidesinger</a> using public APIs by <a href="http://www.google.com" target="_blank">Google</a> and the <a href="https://votinginfoproject.org/" target="_blank">Voting Information Project</a>
	</footer>

	<pre data-bind="text: ko.toJSON(rawResults, null, 2)"></pre>

	<script>
		google.load("feeds", "1");
		$(RepsInTheNews.init);
	</script>

	<script type="text/html" id="FacebookRepLinkTemplate">
		<a class="facebookLink" data-bind="attr: { href:'https://www.facebook.com/'+$data, target: '_blank' }"></a>
	</script>
	<script type="text/html" id="GooglePlusRepLinkTemplate">
		<a class="googlePlusLink" data-bind="attr: { href:'https://plus.google.com/'+$data, target: '_blank' }"></a>
	</script>
	<script type="text/html" id="TwitterRepLinkTemplate">
		<a class="twitterLink" data-bind="attr: { href:'http://www.twitter.com/'+$data, target: '_blank' }"></a>
	</script>
	<script type="text/html" id="YouTubeRepLinkTemplate">
		<a class="youtubeLink" data-bind="attr: { href:'http://www.youtube.com/user/'+$data, target: '_blank' }"></a>
	</script>			
</body>
</html>